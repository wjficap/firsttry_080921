<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Price Alarm</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #price {
            font-size: 2em;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Bitcoin Price Checker</h1>
    <div id="price">Loading...</div>
    
    <input type="number" id="targetPrice" placeholder="Set Alarm Price" />
    <button onclick="setAlarm()">Set Alarm</button>
    
    <audio id="alarmSound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>

    <script>
        let alarmPrice = null;

        async function fetchBitcoinPrice() {
            const response = await fetch('https://api.coindesk.com/v1/bpi/currentprice/BTC.json');
            const data = await response.json();
            const price = data.bpi.USD.rate_float;
            document.getElementById('price').innerText = `Current Price: $${price.toFixed(2)}`;
            checkAlarm(price);
        }

        function checkAlarm(currentPrice) {
            if (alarmPrice !== null && currentPrice >= alarmPrice) {
                document.getElementById('alarmSound').play();
                alert(`Bitcoin has reached your alarm price of $${alarmPrice}!`);
                alarmPrice = null; // Reset the alarm
            }
        }

        function setAlarm() {
            const inputPrice = document.getElementById('targetPrice').value;
            alarmPrice = parseFloat(inputPrice);
            if (isNaN(alarmPrice)) {
                alert('Please enter a valid number for the alarm price.');
            } else {
                alert(`Alarm set for $${alarmPrice}!`);
            }
        }

        // Fetch price every 10 seconds
        setInterval(fetchBitcoinPrice, 10000);
        fetchBitcoinPrice(); // Initial fetch
    </script>
</body>
</html>
